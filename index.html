
<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Escape Room Matem√°tico</title>

<style>
:root{--bg:#0b1020;--text:rgba(255,255,255,.92)}
*{box-sizing:border-box}
body{
  margin:0;font-family:system-ui;background:
  radial-gradient(1200px 700px at 30% 10%, rgba(116,192,252,.2), transparent 60%),
  var(--bg);
  color:var(--text);min-height:100vh;display:flex;justify-content:center;align-items:center;padding:18px
}
.app{width:min(980px,100%);background:rgba(255,255,255,.05);border-radius:20px;overflow:hidden}
header{display:flex;justify-content:space-between;padding:14px;background:rgba(0,0,0,.2)}
.badge{padding:8px 12px;border-radius:999px;background:rgba(255,255,255,.1);font-weight:700}
main{padding:18px}
.panel{background:rgba(255,255,255,.06);border-radius:16px;padding:18px}
.question{font-size:22px;font-weight:800;margin-top:8px}
.answers{display:grid;gap:10px;margin-top:14px}
button{background:rgba(255,255,255,.08);color:white;border:none;padding:14px;border-radius:14px;font-size:16px;cursor:pointer}
button.primary{background:#74c0fc;font-weight:800}
.chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.chip{padding:8px 12px;border-radius:999px;background:rgba(255,255,255,.15);font-weight:900}
input{width:100%;padding:14px;border-radius:14px;border:none;margin-top:10px;font-size:16px}
.progress{height:8px;background:rgba(255,255,255,.1);border-radius:999px;overflow:hidden;margin-bottom:12px}
.progress div{height:100%;background:#74c0fc;width:0%}
</style>
</head>

<body>
<div class="app">
<header>
  <div class="badge" id="stage">üóùÔ∏è Sala 1/4 ¬∑ Pregunta 1/5</div>
  <div class="badge" id="timer">‚è≥ 12:00</div>
</header>

<main>
  <div class="panel">
    <div class="progress"><div id="bar"></div></div>
    <div id="screen"></div>
  </div>
</main>
</div>

<script>
const GAME=[
{w:"MAGIA",q:[
["(-3)+5*2-4",["7","-1","3"],["X","K","I"]],
["8-(-2)*3+1",["11","15","3"],["B","A","G"]],
["(-5)*2+8/(-4)",["-12","-14","-8"],["G","O","F"]],
["12/(-3)+(-2)*5",["-18","-6","-14"],["U","P","A"]],
["(-6)+4*(-2)-3",["-17","-13","-11"],["M","Q","S"]]
]},
{w:"BRUJA",q:[
["35% de 200",["70","65","75"],["J","U","M"]],
["60% es 48",["80","88","72"],["U","M","B"]],
["18 de 72 (%)",["30%","20%","25%"],["Z","N","B"]],
["150‚Ç¨ +20%",["180‚Ç¨","190‚Ç¨","170‚Ç¨"],["A","Z","I"]],
["200‚Ç¨ -15%",["160‚Ç¨","170‚Ç¨","180‚Ç¨"],["P","R","K"]]
]}
];

let s=0,p=0,letras=[],intentos=3,t=720,clk;
const stage=document.getElementById("stage");
const timer=document.getElementById("timer");
const bar=document.getElementById("bar");
const screen=document.getElementById("screen");

function start(){
  clearInterval(clk);
  t=720;
  clk=setInterval(()=>{
    t--; timer.textContent=`‚è≥ ${String(t/60|0).padStart(2,"0")}:${String(t%60).padStart(2,"0")}`;
    if(t<=0) resetSala();
  },1000);
  render();
}

function render(){
  stage.textContent=`üóùÔ∏è Sala ${s+1}/4 ¬∑ Pregunta ${p+1}/5`;
  bar.style.width=(p/5*100)+"%";
  const q=GAME[s].q[p];
  screen.innerHTML=`
    <div class="question">${q[0]}</div>
    <div class="answers">
      ${q[1].map((t,i)=>`<button onclick="pick('${q[2][i]}')">${t}</button>`).join("")}
    </div>
    <div class="chips">${letras.map(l=>`<span class="chip">${l}</span>`).join("")}</div>
  `;
}

function pick(l){
  letras.push(l); p++;
  p<5 ? render() : palabra();
}

function palabra(){
  stage.textContent=`üóùÔ∏è Sala ${s+1}/4 ¬∑ Palabra`;
  bar.style.width="100%";
  screen.innerHTML=`
    <p>Intentos: ${intentos}</p>
    <div class="chips">${letras.map(l=>`<span class="chip">${l}</span>`).join("")}</div>
    <input id="w"><button class="primary" onclick="check()">COMPROBAR</button>
  `;
}

function check(){
  const v=document.getElementById("w").value.toUpperCase().trim();
  if(v===GAME[s].w){s++; resetSala();}
  else{intentos--; intentos>0?palabra():resetSala();}
}

function resetSala(){
  p=0;letras=[];intentos=3;
  start();
}

start();
</script>
</body>
</html>
